<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--<meta name="viewport" content="width=device-width, initial-scale=1">-->
    <title>TransCirc</title>
    <!-- Bootstrap -->
    <link href="/transcirc/assets/css/bootstrap.css" rel="stylesheet">
    <link href="/transcirc/assets/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="https://www.biosino.org/template/assets/css/header.css">
    <link rel="stylesheet" href="https://www.biosino.org/template/assets/css/footer.css">
    <link href="/transcirc/assets/css/style.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="shortcut icon" href="assets/images/icon_16X16.ico" type="image/x-icon"/>
    <link rel="icon" href="/transcirc/assets/images/icon_32X32.ico" sizes="32x32"/>
    <link rel="icon" href="/transcirc/assets/images/icon_48X48.ico" sizes="48x48"/>
    <link rel="icon" href="/transcirc/assets/images/icon_64X64.ico" sizes="64x64"/>
    <link rel="icon" href="/transcirc/assets/images/icon_128X128.ico" sizes="128x128"/>
    <link href="/transcirc/layer/skin/default/layer.css" rel="stylesheet"/>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="/transcirc/assets/js/jquery-1.11.3.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/transcirc/assets/js/bootstrap.js"></script>
    <script src="/transcirc/assets/js/echarts.min.js" type="text/javascript"></script>
    <script src="/transcirc/assets/js/infographic.js" type="text/javascript"></script>
    <script src="/transcirc/layer/layer.js"></script>
</head>
<body class="other-page">
<div id="page-content">
    <div class="search-box">
    <div class="container clearfix">
        <a href="/transcirc" class="logo"><img src="/transcirc/assets/images/logo-small.png" alt="transcirc"></a>
        <div class="menu">
            <a href="/transcirc">Home</a>
            <a href="/transcirc/search">Data</a>
            <a href="/transcirc/download">Download</a>
            <a href="/transcirc/about">About</a>
            <a href="/transcirc/help">Help</a>
        </div>
        <form action="/transcirc/search" id="resultform" method="post">
        <div class="search">
            <input type="text" class="form-control input-lg" name="keywords" value="">
            <a href="javascript:document.getElementById('resultform').submit()"><i class="fa fa-search"></i></a>
        </div>
        </form>
    </div>
</div><div class="container">
    <div class="panel panel-default">
        <div class="panel-heading clearfix">
            <h4 class="panel-title pull-left">CircID: TC-hsa-FNBP1_0079</h4>
        </div>
        <div class="panel-body">
            <div class="row interval-sm">
                <div class="col-xs-5">
                    <div class="panel panel-default cpp">
                        <div class="panel-heading">CircRNA information</div>
                        <div class="detail-base-info">
                            <div class="dbi-box">
                                <div class="title">Taxonomy:</div>
                                <div class="content"><a href="https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?mode=Info&id=9606" target="_blank">Homo sapiens&nbsp;</a></div>
                                <div class="title">Genome Version:</div>
                                <div class="content">hg38&nbsp;</div>
                                <div class="title">Location:</div>
                                <div class="content">chr9:129994843~130014109&nbsp;</div>
                            </div>
                            <div class="dbi-box">
                                <div class="title">Gene:</div>
                                <div class="content"><a href="https://www.ensembl.org/Homo_sapiens/Gene/Summary?db=core;g=ENSG00000187239.16" target="_blank">FNBP1</a></div>
                                <div class="title">Gene type:</div>
                                <div class="content">protein_coding</div>
                                <div class="title">Strand:</div>
                                <div class="content">-</div>
                                <div class="title">exons:</div>
                                <div class="content"><a href="#exons">1</a></div>
                                <div class="title">ORFS:</div>
                                <div class="content"><a href="#orfs">1</a></div>
                            </div>
                            <div class="dbi-box">
                                <div class="title">Xref:</div>
                                <div class="content">
                                    <a href="http://159.226.67.237:8080/new/circ_detail.php?ID=hsa-FNBP1_0057" target="_blank">circAtlas: hsa-FNBP1_0057</a>
                                            <br>
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xs-7">
                    <div class="panel panel-default detail-panel cpp">
                        <div class="panel-heading">Evidences</div>
                        <div class="table-responsive">
                            <table class="table table-bordered table-condensed table-evi">
                                <tbody>
                                <tr>
                                                <td width="225" class=""><i class="fa fa-check"></i>
                                                    Ribosome/polysome profiling<span class="fa fa-question-circle" data-toggle="tooltip"
                                                                    data-content="<b>Ribosomal and polysome binding evidence:</b><p>
The translation of mRNAs is carried out by ribosome, which can form polysomes in actively translated mRNAs. Therefore the association with ribosomes/polysomes can serve as a strong predictor of the potential for translatable circRNA. We used published ribosomal foot printing data and polysomal profile to score the association of circRNAs with ribosomes, which can serve as a strong predictor for translation of circRNAs."></span>

                                                        </td>
                                                <td width="20">0.0</td>
                                                <td rowspan="7">
                                                    <div class="position-relative">
                                                        <div id="chart-1" style="height: 220px; width: 100%;"></div>
                                                        <div style="position:absolute;right: 5px;top: 0px;font-size: 12px">
                                                            <div class="d-flex align-items-center">
                                                                <span class="text-muted width-100 text-right">Evidence score: </span><b class="text-primary">2.995758</b>
                                                            </div>
                                                            <div class="d-flex align-items-center">
                                                                <span class="text-muted width-100 text-right">MS Q-Value: </span><b class="text-primary"></b>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        <tr>
                                                <td class="active"><i class="fa fa-check"></i>
                                                    <a href="#orfs">ORF</a>
                                                        <span class="fa fa-question-circle"
                                                                  data-toggle="tooltip"
                                                                  data-content="<b>ORF length:</b><p>
The length of potential open reading frame (ORF) is a common predictor for coding RNA vs. non-coding RNAs. Usually a long ORF cannot be found in a non-coding RNA, and thus we used the ORF length > 20aa as a minimal requirement for circRNA encoded peptide. It should be noticed that ORF length is a relatively weak predictor, as many small peptide were recently found to be coded by “non-coding” RNAs in human transcriptome, whereas circRNAs with a long ORF will have better chance to be a coding mRNA."></span>
                                                        </td>
                                                <td width="20">1.0</td>
                                            </tr>
                                        <tr>
                                                <td class="active"><i class="fa fa-check"></i>
                                                    <a href="#ires">IRES sequence</a>
                                                        <span class="fa fa-question-circle" data-toggle="tooltip"
                                                                 data-content="<b>IRES sequences:</b><p>
Since circRNAs are covalently closed molecules without free ends, the translation of circRNAs must use an unconventional initiation mechanism known as cap-independent translation initiation. Such initiation pathway has to be driven by IRESs (internal ribosomal entry sites), which are typically short RNA fragments with specialized secondary structure. Although most well-studied IRESs were found in various virus RNAs, there are several cases where the endogenous genes contain IRES to drive translation in a cap-independent fashion. Recently, we and other group conducted a systematic screen for IRES elements in human genome or from random sequences, and thus we used all the available IRES information as evidence to support circRNA translation. "></span>
                                                        </td>
                                                <td width="20">0.18736</td>
                                            </tr>
                                        <tr>
                                                <td class="active"><i class="fa fa-check"></i>
                                                    <a href="#tis">Translation initiation site</a>
                                                        <span class="fa fa-question-circle" data-toggle="tooltip"
                                                                  data-content="<b>Translation initiation site (TIS):</b><p>
A global mapping of TIS codons at nearly single-nucleotide resolution has been achieved by GTI-seq, revealing an unambiguous set of several thousands TIS codons across the entire human transcriptome. We used the data from TISdb based on GTI-seq as an indirect evidence supporting the translation of circRNAs, which also associated with potential ORFs."></span>
                                                        </td>
                                                <td width="20">1.0</td>
                                            </tr>
                                        <tr>
                                                <td class="active"><i class="fa fa-check"></i>
                                                    SeqComp<span class="fa fa-question-circle" data-toggle="tooltip"
                                                                  data-content="<b>sequence composition:</b><p>
The amino acid (aa) sequences of all natural proteins only occupy a very small fraction of the possible sequence space, mostly because only a sub-fraction of sequences can form stable proteins. Therefore the protein with “unnatural” sequence tend to be degraded rapidly, and the sequence similarity to all natural proteins can serve as a strong predictor to identify authentic proteins in random strings of amino acid sequences. Therefore we used machine learning approach to predict how likely a given sequence is with natural proteins, and applied this prediction to score for how likely a given ORF encoded by circRNAs can serve as a template for functional protein."></span>
                                                        </td>
                                                <td width="20">0.8084</td>
                                            </tr>
                                        <tr>
                                                <td class=""><i class="fa fa-check"></i>
                                                    m6A sites<span class="fa fa-question-circle pull-right" data-toggle="tooltip"
                                                                  data-content="<b>m6A sites:</b><p>
The N-6-methyladenosine (m6A) is the most common modification of RNAs, and have been found in many types of non-coding and coding RNAs. We have recently found that circRNAs undergo extensive modification m6A, which can drive circRNA translation through recruiting reader protein YTHDF3 that interacts with translation initiation factors (most notably eIF4G2). Therefore we used published m6A modification data from REPIC database (identified by three different tools), and mapped them back to circRNA sequences. The existence of  experimentally validated m6A sites in circRNA can also serve as a predictor for translatable circRNA, which are integrated in this database."></span>
                                                        </td>
                                                <td width="20">0.0</td>
                                            </tr>
                                        <tr>
                                                <td class=""><i class="fa fa-check"></i>
                                                    MS evidence<span
                                                                    class="fa fa-question-circle" data-toggle="tooltip"
                                                                    data-content="<b>Proteomics evidence by Mass spectrometry:</b><p>
Mass spectrometry is an important method to accurate identify and characterize proteins. Several large scale mass-spectrometry experiments have been conducted to study human proteome, however only about ~50% of MS spectra can be reliably assigned to known peptides coded by human mRNAs even considering the post-translational modification of protein. This result suggests that there are a large fraction of “hidden proteome” encoded by non-canonical mRNA, some of which could be coded by circRNAs. We have defined a new set of rules and rigorous filters to search circRNA-encoded peptide from MS dataset, and use the search results as a strong evidence for circRNA translation. We included all the raw MS spectra supporting the circRNA encoded peptides that cross the back-splice junctions."></span>
                                                        </td>
                                                <td width="20">0.0</td>
                                            </tr>
                                        </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="panel panel-default detail-panel cpp">
                        <div class="panel-heading clearfix"><span class="pull-left">Other evidences</span><a href="#upload" data-toggle="modal" class="btn-success btn-xs pull-right ph-btnxs"><i class="fa fa-upload"></i> Upload</a></div>
                        <div class="table-responsive oevi">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th>File</th>
                                    <th>Author</th>
                                    <th width="150">Date</th>
                                </tr>
                                </thead>
                                <tbody>
                                    </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel panel-default cpp">
                    <div class="panel-heading">Structure</div>
                    <div class="panel-body crs">
                        <div class="position-relative" style="padding-top: 15px">
                            <div class="str-chart" id="chart-5" style="height: 200px;"></div>
                            <div class="d-flex align-items-center" style="position:absolute; top: 0;right:0">
                                <div class="d-flex">
                                    <img src="/transcirc/assets/images/s-icon-1.png" class="m-r-5"> IRES
                                </div>
                                <div class="d-flex m-l-15">
                                    <img src="/transcirc/assets/images/s-icon-2.png" class="m-r-5"> m6A
                                </div>
                                <div class="d-flex m-l-15">
                                    <img src="/transcirc/assets/images/s-icon-3.png" class="m-r-5"> TIS
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            <div class="panel panel-default cpp">
                <div class="panel-heading">circRNA sequence</div>
                <div class="panel-body crs" id="crs">
                    <span><font id=seq0>G</font><font id=seq1>A</font><font id=seq2>T</font><font id=seq3>C</font><font id=seq4>A</font><font id=seq5>G</font><font id=seq6>T</font><font id=seq7>T</font><font id=seq8>T</font><font id=seq9>G</font></span><span><font id=seq10>A</font><font id=seq11>C</font><font id=seq12>A</font><font id=seq13>A</font><font id=seq14>C</font><font id=seq15>T</font><font id=seq16>T</font><font id=seq17>A</font><font id=seq18>G</font><font id=seq19>A</font></span><span><font id=seq20>A</font><font id=seq21>A</font><font id=seq22>A</font><font id=seq23>A</font><font id=seq24>C</font><font id=seq25>A</font><font id=seq26>C</font><font id=seq27>A</font><font id=seq28>C</font><font id=seq29>A</font></span><span><font id=seq30>C</font><font id=seq31>A</font><font id=seq32>G</font><font id=seq33>T</font><font id=seq34>G</font><font id=seq35>G</font><font id=seq36>G</font><font id=seq37>G</font><font id=seq38>A</font><font id=seq39>A</font></span><span><font id=seq40>T</font><font id=seq41>T</font><font id=seq42>G</font><font id=seq43>A</font><font id=seq44>T</font><font id=seq45>A</font><font id=seq46>T</font><font id=seq47>T</font><font id=seq48>C</font><font id=seq49>T</font></span><span><font id=seq50>T</font><font id=seq51>G</font><font id=seq52>A</font><font id=seq53>G</font><font id=seq54>A</font><font id=seq55>A</font><font id=seq56>A</font><font id=seq57>T</font><font id=seq58>A</font><font id=seq59>T</font></span><span><font id=seq60>A</font><font id=seq61>T</font><font id=seq62>C</font><font id=seq63>A</font><font id=seq64>A</font><font id=seq65>G</font><font id=seq66>T</font><font id=seq67>T</font><font id=seq68>T</font><font id=seq69>G</font></span><span><font id=seq70>T</font><font id=seq71>G</font><font id=seq72>A</font><font id=seq73>A</font><font id=seq74>A</font><font id=seq75>G</font><font id=seq76>A</font><font id=seq77>A</font><font id=seq78>A</font><font id=seq79>G</font></span><span><font id=seq80>G</font><font id=seq81>A</font><font id=seq82>C</font><font id=seq83>A</font><font id=seq84>G</font><font id=seq85>A</font><font id=seq86>G</font><font id=seq87>A</font><font id=seq88>T</font><font id=seq89>T</font></span><span><font id=seq90>G</font><font id=seq91>A</font><font id=seq92>A</font><font id=seq93>C</font><font id=seq94>T</font><font id=seq95>C</font><font id=seq96>A</font><font id=seq97>G</font><font id=seq98>C</font><font id=seq99>T</font></span><span><font id=seq100>A</font><font id=seq101>T</font><font id=seq102>G</font><font id=seq103>C</font><font id=seq104>A</font><font id=seq105>A</font><font id=seq106>A</font><font id=seq107>G</font><font id=seq108>C</font><font id=seq109>A</font></span><span><font id=seq110>A</font><font id=seq111>C</font><font id=seq112>T</font><font id=seq113>C</font><font id=seq114>A</font><font id=seq115>G</font></div>
            </div>

            <!-- Exons -->
            <div class="panel panel-default cpp" id="exons">
                    <div class="panel-heading">Exons</div>
                    <div class="panel-body">
                        <ul class="exon-box">
                            <li id="exon0" class="exon" onclick="hightLight('1','116',this)"><span>exon1:</span>129994958~129994843</li>
                            </ul>
                    </div>
                </div>
            <!-- m6A sites -->
            <!-- IRES sequence -->
            <div class="panel panel-default cpp" id="ires">
                    <div class="panel-heading">IRES sequence</div>
                    <div class="panel-body">
                        <ul class="exon-box">
                            <li id="IRES0" class="exon" onclick="hightLight2('55-12', this)">129994904~129994893</li>
                            </ul>
                    </div>
                </div>
            <!-- TIS -->
            <div class="panel panel-default cpp" id="tis">
                    <div class="panel-heading">Translation initiation site</div>
                    <div class="panel-body">
                        <ul class="exon-box">
                            <li id="TIS0" class="exon" onclick="hightLight2('101-3', this)">129994858~129994856</li>
                            </ul>
                    </div>
                </div>
            <div class="panel panel-default cpp" id="orfs">
                <div class="panel-heading">circRNA specific ORFs</div>
                <div class="panel-body">
                    <div class="orf-box">
                        <div class="loc"><h5><b>Attribute</b></h5></div>
                        <div class="chart"><h5><b>ORF struct</b></h5></div>
                        <div class="codes"><h5><b>circRNA sequence</b></h5></div>
                        <div class="codep"><h5><b>Amino acid sequence</b></h5></div>
                        <div class="img"><h5><b>MS evidence</b></h5></div>
                    </div>
                    <div class="orf-box">
                            <div class="loc">
                                <ul>
                                    <li><span class="width-100">Start: </span>70</li>
                                    <li><span class="width-100">Stop: </span>19</li>
                                    <li><span class="width-100">Length: </span>66</li>
                                    <li><span class="width-100">Translation cycles: </span>1</li>
                                </ul>
                            </div>
                            <div class="chart">
                                <div id="orfChart-0" style="height: 110px;position: relative;"></div>
                                <input type="hidden" value='{"start":60.3448275862069,"end":116.37931034482759}' id="json0">
                            </div>
                            <div class="codes">
                                <div class="position-relative">
                                    <div class="cc-box">
                                            GTGAAAGAAAGGACAGAGATTGAACTCAGCTATGCAAAGCAACTCAGGATCAGTTTGACAACTTAG</div>
                                    <div class="cc-more"><i class="fa fa-angle-down"></i></div>
                                    <a href="/transcirc/downloadFasta?circId=TC-hsa-FNBP1_0079&orfIndex=1&type=seq"  class="cc-download"><i class="fa fa-download"></i></a>
                                </div>
                            </div>
                            <div class="codep">
                                <div class="position-relative">
                                    <div class="cc-box">
                                            VKERTEIELSYAKQLRISLTT*</div>
                                    <div class="cc-more"><i class="fa fa-angle-down"></i></div>
                                    <a href="/transcirc/downloadFasta?circId=TC-hsa-FNBP1_0079&orfIndex=1&type=peptides" class="cc-download"><i class="fa fa-download"></i></a>
                                </div>
                            </div>
                            <div class="img">
                                </div>
                        </div>
                    </div>
            </div>
            </div>
    </div>
</div>

<div class="modal fade" id="upload">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Upload</h4>
            </div>
            <div class="modal-body">
                <form id="uploadForm" class="form-horizontal">
                    <input type="hidden" value="TC-hsa-FNBP1_0079" name="circId">
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Data type</label>
                        <div class="col-sm-5"><input type="text" class="form-control"  name="dataType" placeholder="Data type"></div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Method</label>
                        <div class="col-sm-8"><input type="text" class="form-control" name="method" placeholder="Experimental method"></div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Author</label>
                        <div class="col-sm-6"><input type="text" class="form-control" name="author"  placeholder="Author"></div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Literature</label>
                        <div class="col-sm-8"><input type="text" class="form-control" name="pmid" placeholder="PMID"></div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">File</label>
                        <div class="col-sm-8"><input type="file"  name="file" class="form-control"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-3 col-sm-4" id="opeate">
                            <a  href="javascript:void(0)" onclick="uploadFile()" class="btn btn-primary">Save</a>
                        </div>
                    </div>
                </form>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<script src="/transcirc/assets/js/echarts4.min.js" type="text/javascript"></script>
<script src="/transcirc/assets/js/ecStat.js" type="text/javascript"></script>
<script src="/transcirc/assets/js/macarons.js" type="text/javascript"></script>
<script>
    $('[data-toggle=tooltip]').popover({
        html: true,
        placement: 'bottom',
        trigger: 'hover',
        template: '<div class="popover" role="tooltip" style="max-width: none;"><div class="arrow"></div><div class="popover-content" style="width: 500px;color: #676767;font-size: 12px"></div></div>'
    })

    $('.cc-box').each(function () {
        var tempString = $(this).text();
        var num = 220
        if (tempString.length> num) {
            $(this).html(tempString.substring(0, num) + '...');
            $(this).parent().find('.cc-more').click(function () {
                var text = $(this).text()
                if ($(this).find('i.fa').hasClass('fa-angle-down')) {
                    $(this).parent().find('.cc-box').html(tempString);
                    $(this).html('<i class="fa fa-angle-up"></i>')
                } else {
                    $(this).parent().find('.cc-box').html(tempString.substring(0, num) + '...');
                    $(this).html('<i class="fa fa-angle-down"></i>')
                }
            })
        } else {
            $(this).parent().find('.cc-more').addClass('hidden')
        }
    })

    $(function () {
        var size = '1';
        for(var i = 0; i < Number(size); i++) {
            getEchar('orfChart-'+i,$.parseJSON($("#json"+i).val()));
        }
        $(".menu").find('a:contains("Data")').attr('class', 'active');

        getStructureData();
    })

    function hightLight(start, len, _this) {
        $(".exon").removeClass("active");
        $(_this).addClass("active");
        var index1 = parseInt(start);
        var index2 = index1+parseInt(len);
        $("#crs").find("font").removeClass("active");
        for (var i = index1-1; i < index2-1; i++) {
            $("#seq" + i).addClass("active");
        }
    }

    /**
     * 环状的情况
     */
    function hightLight2(startAndLenStr, _this) {
        $(".exon").removeClass("active");
        $(_this).addClass("active");
        $("#crs").find("font").removeClass("active");

        var dataArr = startAndLenStr.split(",")
        for (var j = 0; j < dataArr.length; j++) {
            var start = dataArr[j].split("-")[0];
            var len = dataArr[j].split("-")[1];

            var index1 = parseInt(start);
            var index2 = index1+parseInt(len);

            for (var i = index1-1; i < index2-1; i++) {
                $("#seq" + i).addClass("active");
            }
        }

    }

    function uploadFile() {
        var author = $("input[name='author']").val();
        var file = $("input[name='file']").val();
        if($.trim(author) == '') {
            layer.msg("Author is not null",{offset:"80px"});
            return;
        }
        if($.trim(file) == '') {
            layer.msg("Please select one file",{offset:"80px"})
            return;
        }
        var form = new FormData(document.getElementById("uploadForm"));
        $.ajax({
            url : "/transcirc/upload",
            type: "post",
            processData: false,
            contentType: false,
            data: form,
            beforeSend: function(){
                $("#opeate").html("<img src='/transcirc/assets/images/loading_circle.gif' width='30px'/>");
            },
            success : function (result) {
                result = $.parseJSON(result);
                if (result.code == 200) {
                    layer.msg(result.msg,{offset:"80px"})
                    $("#upload").modal("hide");
                    location.reload();
                } else {
                    layer.msg(result.msg,{offset:"80px"})
                }
            },
            complete: function(){
                $("#opeate").html('<a  href="javascript:void(0)" onclick="uploadFile()" class="btn btn-primary">Save</a>');
            }
        });
    }

    var myChart = echarts.init(document.getElementById('chart-1'), 'infographic');
    myChart.setOption({
//        tooltip: {showContent: false},
        grid: {
            y: 0,
            bottom: 0
        },
        radar: {
            // shape: 'circle',
            indicator: [
                {name: 'RP/PP', max: 1.5},
                {name: 'TIS', max: 1.5},
                {name: 'IRES', max: 1.5},
                {name: 'm6A', max: 1.5},
                {name: 'ORF', max: 1.5},
                {name: 'SeqComp', max: 1.5},
                {name: 'MS', max: 1.5}
            ]
        },
        series: [{
            name: '',
            type: 'radar',
            // areaStyle: {normal: {}},
            data: [
                {
                    value: [0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3],
                    symbolSize: 0,
                    lineStyle: {normal: {color: '#f90', width: 1}},
                    areaStyle: {normal: {color: '#f90', opacity: 0.3}},
                    name: 'Basic'
                },
                {
                    value: $.parseJSON('{"value":[0.3,1.3,0.487359211740503,0.3,1.3,1.108399190680481,0.3]}').value,
                    lineStyle: {normal: {color: '#0d6abc'}},
                    name: 'Evidences and Grouping',
                    areaStyle: {
                        normal: {
                            color:"#badbfe"
                        }
                    }
                }
            ]
        }]
    });

    function getEchar(id,value) {
        var start = value.start;
        var end = value.end;
        var arr1 = [(8+start/80),start/10];
        var arr2 = [(8+end/80),end/10];
        var data = [];
        for (var i = start ; i <= end; i++) {
            var theta = i / 10;
            var r = 8 + theta / 8;
            data.push([r, theta]);
        }
        var myChart = echarts.init(document.getElementById(id), 'infographic');
        myChart.setOption({
            angleAxis: [{
                polarIndex: 0,
                type: 'value',
                max: 10,
                axisLine: {show: false},
                axisLabel: {show: false},
                axisTick: {show: false}
            },{
                type: 'value',
                polarIndex: 1,
                max: 10,
                axisLine: {show: false},
                axisLabel: {show: false},
                axisTick: {show: false}

            }],
            radiusAxis: [{
                polarIndex: 0,
                type: 'category',
                data: [1,2,3],
                z: 10,
                axisLine: {show: false},
                axisLabel: {show: false},
                axisTick: {show: false}
            },{
                type: 'value',
                polarIndex: 1,
                axisLine: {show: false},
                axisLabel: {show: false},
                axisTick: {show: false}
            }],
            polar: [{},{}],
            series: [{
                polarIndex: 1,
                coordinateSystem: 'polar',
                name: 'line',
                type: 'line',
                lineStyle: {
                    normal: {
                        width:2
                    }
                },
                showSymbol: false,
                itemStyle: {
                    normal: {
                        color: '#ffae73'
                    }
                },
                data: data
            },{
                polarIndex: 1,
                coordinateSystem: 'polar',
                name: 'line',
                type: 'line',
                showSymbol: false,
                lineStyle: {normal:{color:'#3574cb'}},
                data: [[0,0],arr1]
            },{
                polarIndex: 1,
                coordinateSystem: 'polar',
                name: 'line',
                type: 'line',
                showSymbol: false,
                lineStyle: {normal:{color:'#3574cb'}},
                data: [[0,0],arr2]
            },{
                name: 'aaa',
                polarIndex: 0,
                type: 'bar',
                data: [null,10],
                coordinateSystem: 'polar',
                stack: 'a',
                itemStyle: {
                    normal: {
                        color: '#bbb'
                    }
                }
            }]
        });
    }

    //----------------------------------------------- Structure start -------------------------------------//
    function rgbToHex(r, g, b) {
        var hex = ((r << 16) | (g << 8) | b).toString(16);
        return "#" + new Array(Math.abs(hex.length - 7)).join("0") + hex;
    }

    function hexToRgb(hex) {
        var rgb = [];
        for (var i = 1; i < 7; i += 2) {
            rgb.push(parseInt("0x" + hex.slice(i, i + 2)));
        }
        return rgb;
    }

    function gradient(startColor, endColor, step) {
        var sColor = hexToRgb(startColor),
            eColor = hexToRgb(endColor);

        var rStep = (eColor[0] - sColor[0]) / step,
            gStep = (eColor[1] - sColor[1]) / step,
            bStep = (eColor[2] - sColor[2]) / step;

        var gradientColorArr = [];
        for (var i = 0; i < step; i++) {
            // 计算每一步的hex值
            gradientColorArr.push(rgbToHex(parseInt(rStep * i + sColor[0]), parseInt(gStep * i + sColor[1]), parseInt(bStep * i + sColor[2])));
        }
        return gradientColorArr;
    }
    var iresColors = gradient('#fbbc05', '#ea4335', 11)

    var chart5 = echarts.init(document.getElementById('chart-5'))
    /**
     * Structure
     */
    function getStructureData() {
        $.ajax({
            url : "/transcirc/getStructureData",
            type: "post",
            data: {"circId": 'TC-hsa-FNBP1_0079'},
            success : function (result) {
                if (result.code == 200) {
                    var data = result.data;
                    var isHaveExon = data.isHaveExon;
                    if (isHaveExon) {
                        var series = [];
                        //exonArr
                        var exonArr = data.exonArr;
                        for (var i = 0; i < exonArr.length; i++) {
                            series.push(exonArr[i]);
                        }
                        //m6A 点
                        var m6AData = data.m6AData;
                        series.push({
                            name: 'm6A',
                            type: 'scatter',
                            symbolSize: [20, 60],
                            xAxisIndex: 1,
                            yAxisIndex: 1,
                            symbol: "path://M16,12l-5.5,8v20h-1V20L4,12c-0.2-0.2-0.3-0.4-0.4-0.6l-0.1-0.2h0c-0.6-1.1-1-2.4-1-3.8C2.5,3.4,5.9,0,10,0s7.5,3.4,7.5,7.5c0,1.4-0.4,2.6-1,3.8h0l-0.1,0.2C16.3,11.6,16.1,11.8,16,12z",
                            symbolOffset: [0, '-55%'],
                            itemStyle: {normal: {color: 'rgba(84,144,104,0.8)'}},
                            zlevel:7,
                            data: m6AData
                        })
                        //TIS点
                        var tisData = data.tisData;
                        series.push({
                            name: 'TIS',
                            type: 'scatter',
                            symbolSize: [20, 60],
                            xAxisIndex: 2,
                            yAxisIndex: 2,
                            symbol: 'path://M16.4,28.6l0.1,0.2h0c0.6,1.1,1,2.4,1,3.8c0,4.1-3.4,7.5-7.5,7.5s-7.5-3.4-7.5-7.5c0-1.4,0.4-2.6,1-3.8h0\n' +
                                '\tl0.1-0.2C3.7,28.4,3.9,28.2,4,28l5.5-8V0h1v20l5.5,8C16.1,28.2,16.3,28.4,16.4,28.6z',
                            symbolOffset: [0, '-55%'],
                            itemStyle: {normal: {color: iresColors[9]}},
                            zlevel: 4,
                            data: tisData
                        })

                        //前三个坐标轴固定
                        var grid = [{top: 30, height: 110, left: 100, right: 100},{top: 10, height: 140, left: 100, right: 100},{top: 85, height: 140, left: 100, right: 100}]
                        var yAxis = [{data: ['Exons'], show: false, gridIndex: 0}, {data: ['m6A'], show: false, gridIndex: 1}, {data: ['TIS'], show: false, gridIndex: 2}]
                        var xAxis = [{type: 'value', show: false, max: data.max, gridIndex: 0}, {type: 'value', show: false, max: data.max, gridIndex: 1}, {type: 'value', show: false, max: data.max, gridIndex: 2}]

                        //IRES 区域
                        var index = 2;
                        var iresData = data.iresData;
                        var key = 'IRES';
                        for (var i = 0; i < iresData.length; i++) {
                            index = index + 1;
                            //每一个IRES对应一个新的坐标轴
                            grid.push({top: 40, height: 30, left: 100, right: 100})
                            yAxis.push({data: [key], show: false, gridIndex: index})
                            xAxis.push({type: 'value', show: false, max: data.max, gridIndex: index})

                            var areaDataObj = iresData[i];
                            var data1 = areaDataObj.data1;
                            var data2 = areaDataObj.data2;
                            var data3 = areaDataObj.data3;
                            var data4 = areaDataObj.data4;
                            //一个环状分成两段 作为唯一标识
                            var data5 = areaDataObj.data5;

                            // console.log("data1=" + data1 + "，data2=" + data2 + "，data3=" + data3 + "，data4=" + data4)
                            series.push({
                                type: 'bar',
                                barWidth: 20,
                                stack: key+i,
                                xAxisIndex: index,
                                yAxisIndex: index,
                                zlevel:3,
                                data: [{
                                    value: data1,
                                    name: '',
                                    itemStyle: {color: 'transparent'}
                                }]
                            })

                            series.push({
                                type: 'bar',
                                barMaxWidth: 14,
                                stack: key+i,
                                xAxisIndex: index,
                                yAxisIndex: index,
                                markLine: {
                                    symbol: 'none',
                                    label: {show:false},
                                    lineStyle: {
                                        type: 'solid',
                                        width: 1,
                                        color: iresColors[3]
                                    },
                                    data: data2,
                                    animationDuration: 300
                                },
                                zlevel:5,
                                data: [{
                                    customId: data5,
                                    value: data3,
                                    name: key,
                                    itemStyle: {
                                        color: iresColors[3]
                                    },
                                    metaData: data4
                                }],
                            })
                        }

                        chart5.setOption({
                            tooltip: {
                                formatter: function (params) {
                                    var html = ''
                                    var d = params.data.metaData
                                    if (d) {
                                        html += params.data.name + ': '
                                        if (d.length > 1) html += d[0] + '~' + d[1]
                                        else html += d[0]
                                    }
                                    return html
                                }
                            },
                            grid: grid,
                            yAxis: yAxis,
                            xAxis: xAxis,
                            series: series
                        })
                    }
                } else {
                    layer.msg(result.msg)
                }
            }
        });
    }

    chart5.on('click',function (params) {
        // console.log(params)
        var customId = params.data.customId;
        $("#"+customId).click();
    })

    //----------------------------------------------- Structure end -------------------------------------//
    
    function initModel(seq, locationA, locationB) {
        //seq下载序列时使用
        $("#title").val(locationA + "-" + locationB);
        $("#fasta-data").val(seq);
        $("#locationA-span").html('<span class="text-muted">LocationA: </span>' + locationA);
        $("#locationB-span").html('<span class="text-muted">LocationB: </span>' + locationB);

        $("#modal-img").modal("show")
    }
</script></div>
<script id="headerJS"  hbColor='#104eb1' ngdcShowInd='1' hfColor='#ffffff' hdWidth='1200px' rightPartReserved='1' src="https://www.biosino.org/template/assets/js/header04.js"></script>
<script id="footerJS" fbColor='#f0f5f9' ftWidth='1200px' nstiLogoShow='1' src="https://www.biosino.org/template/assets/js/footer03.js"></script>
<script>
    $(document).ready(function () {
            $('.container-fluid').each(function () {
            $(this).removeAttr('style').addClass('container')
        })
    })
</script>